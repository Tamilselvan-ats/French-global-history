<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>French Global History</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root { --bg:#030814; --accent:#2563eb; --muted:#93a3bd; color-scheme: dark; }
    body {
      margin:0; min-height:100vh; display:flex; flex-direction:column;
      justify-content:center; align-items:center;
      background:linear-gradient(180deg,#010a1f,#041836);
      font-family:'Poppins',sans-serif; color:#e6eef8;
      padding:20px; text-align:center;
    }
    h1 {
      font-size:1.6rem; font-weight:700;
      margin-bottom:6px; letter-spacing:1px;
    }
    h2 {
      font-size:1rem; font-weight:400;
      color:var(--muted); margin-bottom:18px;
    }
    video {
      width:90%; max-width:900px; border-radius:10px;
      box-shadow:0 6px 25px rgba(0,0,0,0.5);
      background:#000;
    }
    .controls {
      display:flex; gap:10px; justify-content:center;
      margin-top:14px; flex-wrap:wrap;
    }
    .btn {
      background:var(--accent); border:none; color:white;
      padding:8px 16px; border-radius:8px; cursor:pointer;
      font-weight:600; font-size:0.9rem;
      transition:0.2s;
    }
    .btn:hover { background:#1d4ed8; }
    .btn.active { background:#1e40af; box-shadow:0 0 0 2px #93c5fd; }
    input[type=range] {
      -webkit-appearance:none; width:80%; max-width:700px;
      height:6px; border-radius:6px;
      background:rgba(255,255,255,0.1); margin-top:10px;
    }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance:none; width:14px; height:14px;
      border-radius:50%; background:white; cursor:pointer;
    }
    footer {
      margin-top:20px; font-size:0.9rem; color:var(--muted);
    }
    .video-container {
      position:relative; width:90%; max-width:900px;
    }
    .loading { color:var(--muted); font-style:italic; }
    
    /* Subtitle controls */
    .subtitle-controls {
      display:flex; gap:8px; justify-content:center;
      margin-top:12px; flex-wrap:wrap;
    }
    .subtitle-btn {
      background:#475569; border:none; color:white;
      padding:6px 12px; border-radius:6px; cursor:pointer;
      font-size:0.8rem; transition:0.2s;
    }
    .subtitle-btn:hover { background:#64748b; }
    .subtitle-btn.active { background:#2563eb; }
    
    /* Custom subtitle display */
    .custom-subtitle {
      position:absolute; bottom:60px; left:0; right:0;
      background:rgba(0,0,0,0.8); color:white;
      padding:12px 16px; border-radius:8px;
      margin:0 20px; font-size:1rem;
      text-align:center; backdrop-filter:blur(4px);
      border:1px solid rgba(255,255,255,0.1);
      display:none; z-index:10;
    }
    
    /* Subtitle track info */
    .subtitle-info {
      margin-top:8px; font-size:0.8rem;
      color:#93a3bd; font-style:italic;
    }
  </style>
</head>
<body>
  <h1>FRENCH GLOBAL HISTORY</h1>
  <h2>Done by<br>
    A TAMIL SELVAN (RA2512707010018)<br>
    B ASHWIN (RA2511003012359)
  </h2>

  <div class="video-container">
    <video id="player" controls preload="metadata" poster="">
      <!-- Important: keep France.mp4 in the same folder as this HTML file -->
      <source src="France.mp4" type="video/mp4">
      
      <!-- English Subtitles Track -->
      <track id="englishSubs" kind="subtitles" src="subtitles.vtt" srclang="en" label="English" default>
      <track id="frenchSubs" kind="subtitles" src="french-subtitles.vtt" srclang="fr" label="French">
      
      Your browser does not support HTML5 video.
    </video>
    
    <!-- Custom subtitle display (fallback) -->
    <div class="custom-subtitle" id="customSubtitle"></div>
    
    <div class="loading" id="loadingMessage">
      Loading video... If video doesn't load, make sure "France.mp4" is in the same folder as this HTML file.
    </div>
  </div>

  <!-- Subtitle Controls -->
  <div class="subtitle-controls">
    <button class="subtitle-btn active" data-lang="off" id="subsOff">Subtitles Off</button>
    <button class="subtitle-btn" data-lang="en" id="subsEnglish">English Subs</button>
    <button class="subtitle-btn" data-lang="fr" id="subsFrench">French Subs</button>
    <button class="subtitle-btn" data-lang="custom" id="subsCustom">Auto English</button>
  </div>
  
  <div class="subtitle-info" id="subtitleInfo">
    English subtitles available - Click to enable
  </div>

  <!-- Original Controls -->
  <div class="controls">
    <button id="backBtn" class="btn">« 10s</button>
    <button id="playBtn" class="btn">Play / Pause</button>
    <button id="forwardBtn" class="btn">10s »</button>
  </div>

  <input id="seek" type="range" min="0" max="100" value="0" step="0.1">

  <footer>French Global History Project - Educational Content</footer>

<script>
  const player = document.getElementById('player');
  const playBtn = document.getElementById('playBtn');
  const backBtn = document.getElementById('backBtn');
  const forwardBtn = document.getElementById('forwardBtn');
  const seek = document.getElementById('seek');
  const loadingMessage = document.getElementById('loadingMessage');
  const customSubtitle = document.getElementById('customSubtitle');
  const subtitleInfo = document.getElementById('subtitleInfo');

  // Subtitle buttons
  const subsOff = document.getElementById('subsOff');
  const subsEnglish = document.getElementById('subsEnglish');
  const subsFrench = document.getElementById('subsFrench');
  const subsCustom = document.getElementById('subsCustom');

  // Sample English subtitles data (you can replace this with your actual subtitles)
  const englishSubtitles = [
    { start: 0, end: 5, text: "Welcome to French Global History" },
    { start: 5, end: 10, text: "Exploring France's impact on world history" },
    { start: 10, end: 15, text: "From the French Revolution to modern times" },
    { start: 15, end: 20, text: "France's cultural and political influence worldwide" },
    { start: 20, end: 25, text: "The Age of Enlightenment and its global effects" },
    { start: 25, end: 30, text: "French colonial empire and its legacy" },
    { start: 30, end: 35, text: "The Napoleonic Wars and European transformation" },
    { start: 35, end: 40, text: "French language and culture across continents" },
    { start: 40, end: 45, text: "Modern France in the global community" }
  ];

  // Subtitle management
  let activeSubtitles = [];
  let currentSubtitleIndex = -1;

  function updateSubtitleDisplay() {
    const currentTime = player.currentTime;
    const subtitle = activeSubtitles.find(sub => 
      currentTime >= sub.start && currentTime < sub.end
    );
    
    if (subtitle && subtitle.text) {
      customSubtitle.textContent = subtitle.text;
      customSubtitle.style.display = 'block';
    } else {
      customSubtitle.style.display = 'none';
    }
  }

  function setSubtitles(lang) {
    // Reset all buttons
    [subsOff, subsEnglish, subsFrench, subsCustom].forEach(btn => 
      btn.classList.remove('active')
    );
    
    // Hide custom subtitle
    customSubtitle.style.display = 'none';
    
    // Turn off native subtitles
    for (let i = 0; i < player.textTracks.length; i++) {
      player.textTracks[i].mode = 'disabled';
    }
    
    switch(lang) {
      case 'off':
        subsOff.classList.add('active');
        activeSubtitles = [];
        subtitleInfo.textContent = "Subtitles disabled";
        break;
        
      case 'en':
        subsEnglish.classList.add('active');
        // Enable native English subtitles if available
        const engTrack = player.textTracks[0];
        if (engTrack && engTrack.kind === 'subtitles') {
          engTrack.mode = 'showing';
          subtitleInfo.textContent = "English subtitles enabled";
        } else {
          // Fallback to custom subtitles
          activeSubtitles = englishSubtitles;
          subtitleInfo.textContent = "Custom English subtitles enabled";
        }
        break;
        
      case 'fr':
        subsFrench.classList.add('active');
        // Enable French subtitles if available
        const frTrack = player.textTracks[1];
        if (frTrack && frTrack.kind === 'subtitles') {
          frTrack.mode = 'showing';
          subtitleInfo.textContent = "French subtitles enabled";
        } else {
          subtitleInfo.textContent = "French subtitles not available";
        }
        break;
        
      case 'custom':
        subsCustom.classList.add('active');
        activeSubtitles = englishSubtitles;
        subtitleInfo.textContent = "Auto-generated English subtitles";
        break;
    }
  }

  // Event listeners for subtitle buttons
  subsOff.addEventListener('click', () => setSubtitles('off'));
  subsEnglish.addEventListener('click', () => setSubtitles('en'));
  subsFrench.addEventListener('click', () => setSubtitles('fr'));
  subsCustom.addEventListener('click', () => setSubtitles('custom'));

  // Original video controls (unchanged)
  player.addEventListener('loadeddata', () => {
    loadingMessage.style.display = 'none';
    // Check if subtitles are available
    const hasSubtitles = player.textTracks.length > 0;
    if (hasSubtitles) {
      subtitleInfo.textContent = "Subtitles available - Click to enable";
    }
  });
  
  player.addEventListener('error', () => {
    loadingMessage.innerHTML = '❌ Video failed to load. Please check that "France.mp4" is in the same folder.';
    loadingMessage.style.color = '#ff6b6b';
  });

  // Update custom subtitles during playback
  player.addEventListener('timeupdate', () => {
    if (!isNaN(player.duration)) {
      seek.value = (player.currentTime / player.duration) * 100;
    }
    
    // Update custom subtitle display if active
    if (activeSubtitles.length > 0) {
      updateSubtitleDisplay();
    }
  });

  playBtn.addEventListener('click', () => player.paused ? player.play() : player.pause());
  backBtn.addEventListener('click', () => player.currentTime = Math.max(0, player.currentTime - 10));
  forwardBtn.addEventListener('click', () => player.currentTime = Math.min(player.duration, player.currentTime + 10));

  seek.addEventListener('input', () => {
    if (!isNaN(player.duration)) player.currentTime = (seek.value / 100) * player.duration;
  });

  // Keyboard shortcuts (enhanced with subtitle controls)
  document.addEventListener('keydown', (e) => {
    if (e.code === 'Space') { 
      e.preventDefault(); 
      player.paused ? player.play() : player.pause(); 
    }
    if (e.code === 'ArrowLeft') player.currentTime = Math.max(0, player.currentTime - 10);
    if (e.code === 'ArrowRight') player.currentTime = Math.min(player.duration, player.currentTime + 10);
    
    // Subtitle shortcuts
    if (e.code === 'KeyS') setSubtitles('off');
    if (e.code === 'KeyE') setSubtitles('en');
    if (e.code === 'KeyC') setSubtitles('custom');
  });

  // Initialize with subtitles off
  setSubtitles('off');
</script>
</body>
</html>
